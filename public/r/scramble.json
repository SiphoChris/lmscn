{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "scramble",
  "type": "registry:component",
  "title": "Word Scramble",
  "description": "Letter-tile word unscrambling game with optional image/text clues and a reset button.",
  "registryDependencies": [
    "button",
    "progress",
    "badge"
  ],
  "files": [
    {
      "path": "registry/default/scramble/scramble.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useState, useCallback } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { CheckCircle2, XCircle, ChevronRight, RotateCcw } from \"lucide-react\"\n\n// ─── Types ────────────────────────────────────────────────────────────────────\n\nexport interface ScrambleQuestion {\n  id: string\n  /** The correct word or phrase (spaces are stripped for the tile pool) */\n  answer: string\n  /** Clue / context shown above the tile area */\n  clue?: string\n  /** Optional image clue */\n  clueImage?: string\n}\n\nexport interface ScrambleData {\n  title: string\n  description?: string\n  questions: ScrambleQuestion[]\n}\n\nexport interface ScrambleAttempt {\n  questionId: string\n  given: string\n  correct: boolean\n}\n\nexport interface ScrambleResult {\n  attempts: ScrambleAttempt[]\n  score: number\n  maxScore: number\n  percentage: number\n}\n\nexport interface ScrambleProps {\n  scrambleData: ScrambleData\n  onComplete?: (result: ScrambleResult) => void\n  className?: string\n}\n\n// ─── Helpers ──────────────────────────────────────────────────────────────────\n\ninterface LetterTile {\n  /** Unique key for React */\n  id: string\n  char: string\n}\n\nfunction buildScrambled(word: string): LetterTile[] {\n  const tiles: LetterTile[] = word.split(\"\").map((char, i) => ({\n    id: `${i}-${char}-${Math.random()}`,\n    char,\n  }))\n  let shuffled = [...tiles]\n  do {\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1))\n      ;[shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]]\n    }\n  } while (\n    shuffled.map((t) => t.char).join(\"\") === word &&\n    word.length > 1\n  )\n  return shuffled\n}\n\n// ─── Component ────────────────────────────────────────────────────────────────\n\nexport function Scramble({\n  scrambleData,\n  onComplete,\n  className,\n}: ScrambleProps) {\n  const { title, description, questions } = scrambleData\n\n  const [index, setIndex] = useState(0)\n  const [submitted, setSubmitted] = useState(false)\n  const [attempts, setAttempts] = useState<ScrambleAttempt[]>([])\n  const [finished, setFinished] = useState(false)\n\n  const question = questions[index]\n  const answerLetters = question.answer.replace(/\\s/g, \"\")\n\n  const [pool, setPool] = useState<LetterTile[]>(() =>\n    buildScrambled(answerLetters)\n  )\n  const [selected, setSelected] = useState<LetterTile[]>([])\n\n  const progress = (index / questions.length) * 100\n  const userWord = selected.map((t) => t.char).join(\"\")\n  const correct =\n    userWord.toLowerCase() === answerLetters.toLowerCase()\n\n  React.useEffect(() => {\n    setPool(buildScrambled(question.answer.replace(/\\s/g, \"\")))\n    setSelected([])\n    setSubmitted(false)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [index])\n\n  const pickTile = useCallback(\n    (tile: LetterTile) => {\n      if (submitted) return\n      setPool((p) => p.filter((t) => t.id !== tile.id))\n      setSelected((s) => [...s, tile])\n    },\n    [submitted]\n  )\n\n  const returnTile = useCallback(\n    (tile: LetterTile) => {\n      if (submitted) return\n      setSelected((s) => s.filter((t) => t.id !== tile.id))\n      setPool((p) => [...p, tile])\n    },\n    [submitted]\n  )\n\n  const handleReset = useCallback(() => {\n    setPool((p) => [...p, ...selected])\n    setSelected([])\n  }, [selected])\n\n  const handleSubmit = useCallback(() => {\n    if (selected.length === 0) return\n    setSubmitted(true)\n  }, [selected.length])\n\n  const handleNext = useCallback(() => {\n    const attempt: ScrambleAttempt = {\n      questionId: question.id,\n      given: userWord,\n      correct,\n    }\n    const newAttempts = [...attempts, attempt]\n    setAttempts(newAttempts)\n\n    if (index + 1 >= questions.length) {\n      const score = newAttempts.filter((a) => a.correct).length\n      const res: ScrambleResult = {\n        attempts: newAttempts,\n        score,\n        maxScore: questions.length,\n        percentage: Math.round((score / questions.length) * 100),\n      }\n      setFinished(true)\n      onComplete?.(res)\n    } else {\n      setIndex((i) => i + 1)\n    }\n  }, [\n    question.id,\n    userWord,\n    correct,\n    attempts,\n    index,\n    questions.length,\n    onComplete,\n  ])\n\n  // ── Finished ──────────────────────────────────────────────────────────────\n  if (finished) {\n    const score = attempts.filter((a) => a.correct).length\n    const pct = Math.round((score / questions.length) * 100)\n    return (\n      <div\n        className={cn(\n          \"w-full max-w-xl mx-auto text-center space-y-4\",\n          className\n        )}\n      >\n        <h2 className=\"text-2xl font-bold\">Done!</h2>\n        <p className=\"text-5xl font-bold\">{pct}%</p>\n        <p className=\"text-muted-foreground\">\n          {score} / {questions.length} correct\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn(\"w-full max-w-xl mx-auto space-y-6\", className)}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"font-semibold text-lg\">{title}</h2>\n          {description && (\n            <p className=\"text-sm text-muted-foreground\">{description}</p>\n          )}\n        </div>\n        <Badge variant=\"outline\">\n          {index + 1} / {questions.length}\n        </Badge>\n      </div>\n\n      <Progress value={progress} className=\"h-1.5\" />\n\n      <div className=\"rounded-xl border bg-card p-6 space-y-6\">\n        {question.clueImage && (\n          <img\n            src={question.clueImage}\n            alt=\"clue\"\n            className=\"mx-auto max-h-32 object-contain rounded\"\n          />\n        )}\n        {question.clue && (\n          <p className=\"text-center text-muted-foreground text-sm italic\">\n            {question.clue}\n          </p>\n        )}\n\n        {/* Answer tray */}\n        <div className=\"flex flex-wrap gap-2 justify-center min-h-12\">\n          {selected.map((tile) => (\n            <button\n              key={tile.id}\n              onClick={() => returnTile(tile)}\n              disabled={submitted}\n              className={cn(\n                \"h-10 min-w-[2.5rem] px-3 rounded-lg border-2 font-mono font-bold text-lg uppercase transition-all\",\n                submitted &&\n                  correct &&\n                  \"border-green-500 bg-green-50 dark:bg-green-950/20 text-green-700\",\n                submitted &&\n                  !correct &&\n                  \"border-destructive bg-destructive/5 text-destructive\",\n                !submitted &&\n                  \"border-primary bg-primary/5 hover:bg-primary/10\"\n              )}\n            >\n              {tile.char}\n            </button>\n          ))}\n          {selected.length === 0 && (\n            <span className=\"text-sm text-muted-foreground self-center\">\n              Pick letters below\n            </span>\n          )}\n        </div>\n\n        {/* Validation feedback */}\n        {submitted && (\n          <div className=\"flex items-center justify-center gap-2\">\n            {correct ? (\n              <>\n                <CheckCircle2 className=\"size-5 text-green-600\" />\n                <span className=\"text-green-600 font-medium\">Correct!</span>\n              </>\n            ) : (\n              <>\n                <XCircle className=\"size-5 text-destructive\" />\n                <span className=\"text-destructive font-medium\">\n                  Correct answer: {question.answer}\n                </span>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Tile pool */}\n        {!submitted && (\n          <div className=\"flex flex-wrap gap-2 justify-center\">\n            {pool.map((tile) => (\n              <button\n                key={tile.id}\n                onClick={() => pickTile(tile)}\n                className=\"h-10 min-w-[2.5rem] px-3 rounded-lg border font-mono font-bold text-lg uppercase hover:bg-muted transition-colors\"\n              >\n                {tile.char}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex justify-between\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={handleReset}\n          disabled={submitted || selected.length === 0}\n        >\n          <RotateCcw className=\"mr-1.5 size-3.5\" />\n          Reset\n        </Button>\n        {!submitted ? (\n          <Button\n            onClick={handleSubmit}\n            disabled={selected.length === 0}\n          >\n            Submit\n          </Button>\n        ) : (\n          <Button onClick={handleNext}>\n            {index + 1 >= questions.length ? \"See Results\" : \"Next\"}\n            <ChevronRight className=\"ml-1 size-4\" />\n          </Button>\n        )}\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:component"
    }
  ]
}