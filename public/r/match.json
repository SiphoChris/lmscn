{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "match",
  "type": "registry:component",
  "title": "Match",
  "description": "Click-to-match term/definition pairs with mistake tracking and animated wrong-answer shake.",
  "registryDependencies": [
    "button",
    "progress",
    "badge"
  ],
  "files": [
    {
      "path": "registry/default/match/match.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useState, useCallback } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { CheckCircle2, RotateCcw } from \"lucide-react\"\n\n// ─── Types ────────────────────────────────────────────────────────────────────\n\nexport interface MatchPair {\n  id: string\n  left: string\n  right: string\n  /** Optional image for the left item */\n  leftImage?: string\n  /** Optional image for the right item */\n  rightImage?: string\n}\n\nexport interface MatchData {\n  title: string\n  description?: string\n  pairs: MatchPair[]\n  /** Randomise right-column order (default: true) */\n  shuffle?: boolean\n}\n\nexport interface MatchResult {\n  matched: MatchPair[]\n  /** Number of incorrect pair attempts */\n  mistakes: number\n  /** Duration in milliseconds */\n  durationMs: number\n}\n\nexport interface MatchProps {\n  matchData: MatchData\n  onComplete?: (result: MatchResult) => void\n  className?: string\n}\n\n// ─── Helpers ──────────────────────────────────────────────────────────────────\n\nfunction shuffleArray<T>(arr: T[]): T[] {\n  return [...arr].sort(() => Math.random() - 0.5)\n}\n\ninterface ItemState {\n  id: string\n  side: \"left\" | \"right\"\n  pairId: string\n  label: string\n  image?: string\n}\n\n// ─── Component ────────────────────────────────────────────────────────────────\n\nexport function Match({ matchData, onComplete, className }: MatchProps) {\n  const { title, description, shuffle = true } = matchData\n\n  const leftItems = React.useMemo<ItemState[]>(\n    () =>\n      matchData.pairs.map((p) => ({\n        id: `left-${p.id}`,\n        side: \"left\" as const,\n        pairId: p.id,\n        label: p.left,\n        image: p.leftImage,\n      })),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  const rightItems = React.useMemo<ItemState[]>(() => {\n    const items: ItemState[] = matchData.pairs.map((p) => ({\n      id: `right-${p.id}`,\n      side: \"right\" as const,\n      pairId: p.id,\n      label: p.right,\n      image: p.rightImage,\n    }))\n    return shuffle ? shuffleArray(items) : items\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const [selectedLeft, setSelectedLeft] = useState<ItemState | null>(null)\n  const [selectedRight, setSelectedRight] = useState<ItemState | null>(null)\n  const [matched, setMatched] = useState<Set<string>>(new Set())\n  const [wrong, setWrong] = useState<Set<string>>(new Set())\n  const [mistakes, setMistakes] = useState(0)\n  const [startTime] = useState(() => Date.now())\n  const [finished, setFinished] = useState(false)\n\n  const isMatched = (item: ItemState) => matched.has(item.pairId)\n  const isWrong = (item: ItemState) => wrong.has(item.id)\n\n  const progress = (matched.size / matchData.pairs.length) * 100\n\n  const checkMatch = useCallback(\n    (left: ItemState, right: ItemState) => {\n      if (left.pairId === right.pairId) {\n        const newMatched = new Set(matched).add(left.pairId)\n        setMatched(newMatched)\n        setSelectedLeft(null)\n        setSelectedRight(null)\n\n        if (newMatched.size === matchData.pairs.length) {\n          const res: MatchResult = {\n            matched: matchData.pairs,\n            mistakes,\n            durationMs: Date.now() - startTime,\n          }\n          setFinished(true)\n          onComplete?.(res)\n        }\n      } else {\n        setMistakes((m) => m + 1)\n        setWrong(new Set([left.id, right.id]))\n        setTimeout(() => {\n          setWrong(new Set())\n          setSelectedLeft(null)\n          setSelectedRight(null)\n        }, 600)\n      }\n    },\n    [matched, matchData.pairs, mistakes, startTime, onComplete]\n  )\n\n  const handleLeft = useCallback(\n    (item: ItemState) => {\n      if (isMatched(item) || wrong.size > 0) return\n      const next = selectedLeft?.id === item.id ? null : item\n      setSelectedLeft(next)\n      if (next && selectedRight) checkMatch(next, selectedRight)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [selectedLeft, selectedRight, matched, wrong, checkMatch]\n  )\n\n  const handleRight = useCallback(\n    (item: ItemState) => {\n      if (isMatched(item) || wrong.size > 0) return\n      const next = selectedRight?.id === item.id ? null : item\n      setSelectedRight(next)\n      if (selectedLeft && next) checkMatch(selectedLeft, next)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [selectedLeft, selectedRight, matched, wrong, checkMatch]\n  )\n\n  const itemClass = (item: ItemState, isLeft: boolean) => {\n    const sel = isLeft\n      ? selectedLeft?.id === item.id\n      : selectedRight?.id === item.id\n\n    return cn(\n      \"w-full rounded-lg border px-4 py-3 text-sm text-center transition-all duration-200 cursor-pointer\",\n      isMatched(item) &&\n        \"border-green-500 bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-400 cursor-default\",\n      isWrong(item) && \"border-destructive bg-destructive/10 animate-shake\",\n      !isMatched(item) && !isWrong(item) && sel &&\n        \"border-primary bg-primary/10 shadow-sm\",\n      !isMatched(item) && !isWrong(item) && !sel &&\n        \"hover:border-muted-foreground/40 hover:bg-muted/40\"\n    )\n  }\n\n  // ── Finished ──────────────────────────────────────────────────────────────\n  if (finished) {\n    const seconds = Math.round((Date.now() - startTime) / 1000)\n    return (\n      <div\n        className={cn(\n          \"w-full max-w-2xl mx-auto space-y-6 text-center\",\n          className\n        )}\n      >\n        <CheckCircle2 className=\"mx-auto size-16 text-green-500\" />\n        <div>\n          <h2 className=\"text-2xl font-bold\">All matched!</h2>\n          <p className=\"text-muted-foreground\">\n            {mistakes === 0\n              ? \"Perfect — no mistakes!\"\n              : `${mistakes} mistake${mistakes > 1 ? \"s\" : \"\"}`}{\" \"}\n            · {seconds}s\n          </p>\n        </div>\n        <Button\n          variant=\"outline\"\n          onClick={() => {\n            setMatched(new Set())\n            setWrong(new Set())\n            setMistakes(0)\n            setSelectedLeft(null)\n            setSelectedRight(null)\n            setFinished(false)\n          }}\n        >\n          <RotateCcw className=\"mr-2 size-4\" />\n          Play Again\n        </Button>\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn(\"w-full max-w-2xl mx-auto space-y-4\", className)}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"font-semibold text-lg\">{title}</h2>\n          {description && (\n            <p className=\"text-sm text-muted-foreground\">{description}</p>\n          )}\n        </div>\n        <Badge variant=\"outline\">\n          {matched.size} / {matchData.pairs.length}\n        </Badge>\n      </div>\n\n      <Progress value={progress} className=\"h-1.5\" />\n\n      <div className=\"grid grid-cols-2 gap-3\">\n        {/* Left column */}\n        <div className=\"space-y-2\">\n          <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide text-center\">\n            Term\n          </p>\n          {leftItems.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => handleLeft(item)}\n              disabled={isMatched(item)}\n              className={itemClass(item, true)}\n            >\n              {item.image && (\n                <img\n                  src={item.image}\n                  alt=\"\"\n                  className=\"mx-auto mb-2 max-h-12 object-contain\"\n                />\n              )}\n              {isMatched(item) && (\n                <CheckCircle2 className=\"inline mr-1.5 size-3.5 text-green-600\" />\n              )}\n              {item.label}\n            </button>\n          ))}\n        </div>\n\n        {/* Right column */}\n        <div className=\"space-y-2\">\n          <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide text-center\">\n            Definition\n          </p>\n          {rightItems.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => handleRight(item)}\n              disabled={isMatched(item)}\n              className={itemClass(item, false)}\n            >\n              {item.image && (\n                <img\n                  src={item.image}\n                  alt=\"\"\n                  className=\"mx-auto mb-2 max-h-12 object-contain\"\n                />\n              )}\n              {isMatched(item) && (\n                <CheckCircle2 className=\"inline mr-1.5 size-3.5 text-green-600\" />\n              )}\n              {item.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {mistakes > 0 && (\n        <p className=\"text-xs text-center text-muted-foreground\">\n          Mistakes: {mistakes}\n        </p>\n      )}\n    </div>\n  )\n}\n",
      "type": "registry:component"
    }
  ]
}