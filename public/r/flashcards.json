{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "flashcards",
  "type": "registry:component",
  "title": "Flashcards",
  "description": "CSS 3-D flip-card deck with optional self-rating (Again / Hard / Good / Easy) and a session summary.",
  "registryDependencies": [
    "button",
    "card",
    "progress",
    "badge"
  ],
  "files": [
    {
      "path": "registry/default/flashcards/flashcards.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { useState, useCallback } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { RotateCcw, ChevronLeft, ChevronRight, ThumbsUp } from \"lucide-react\"\n\nexport type FlashcardDifficulty = \"again\" | \"hard\" | \"good\" | \"easy\"\n\nexport interface Flashcard {\n  id: string\n  front: string\n  back: string\n  frontImage?: string\n  backImage?: string\n  tag?: string\n}\n\nexport interface FlashcardsData {\n  title: string\n  description?: string\n  cards: Flashcard[]\n  /** Show self-rating buttons (default: true) */\n  showRatings?: boolean\n  /** Randomise order (default: false) */\n  shuffle?: boolean\n}\n\nexport interface FlashcardRating {\n  cardId: string\n  difficulty: FlashcardDifficulty\n}\n\nexport interface FlashcardsResult {\n  ratings: FlashcardRating[]\n  counts: Record<FlashcardDifficulty, number>\n}\n\nexport interface FlashcardsProps {\n  flashcardsData: FlashcardsData\n  onComplete?: (result: FlashcardsResult) => void\n  className?: string\n}\n\nfunction shuffleArray<T>(arr: T[]): T[] {\n  return [...arr].sort(() => Math.random() - 0.5)\n}\n\nconst DIFFICULTY_CONFIG: Record<\n  FlashcardDifficulty,\n  { label: string; variant: \"destructive\" | \"outline\" | \"secondary\" | \"default\" }\n> = {\n  again: { label: \"Again\", variant: \"destructive\" },\n  hard:  { label: \"Hard\",  variant: \"outline\"     },\n  good:  { label: \"Good\",  variant: \"secondary\"   },\n  easy:  { label: \"Easy\",  variant: \"default\"     },\n}\n\nexport function Flashcards({ flashcardsData, onComplete, className }: FlashcardsProps) {\n  const { title, description, showRatings = true, shuffle = false } = flashcardsData\n\n  const cards = React.useMemo(\n    () => shuffle ? shuffleArray(flashcardsData.cards) : flashcardsData.cards,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  const [index, setIndex]       = useState(0)\n  const [flipped, setFlipped]   = useState(false)\n  const [ratings, setRatings]   = useState<FlashcardRating[]>([])\n  const [finished, setFinished] = useState(false)\n\n  const card     = cards[index]\n  const progress = ((index + (flipped ? 0.5 : 0)) / cards.length) * 100\n\n  const handleFlip = useCallback(() => setFlipped((f) => !f), [])\n\n  const handleRate = useCallback(\n    (difficulty: FlashcardDifficulty) => {\n      const newRatings = [...ratings, { cardId: card.id, difficulty }]\n      setRatings(newRatings)\n      if (index + 1 >= cards.length) {\n        const counts: Record<FlashcardDifficulty, number> = { again: 0, hard: 0, good: 0, easy: 0 }\n        for (const r of newRatings) counts[r.difficulty]++\n        setFinished(true)\n        onComplete?.({ ratings: newRatings, counts })\n      } else {\n        setIndex((i) => i + 1)\n        setFlipped(false)\n      }\n    },\n    [ratings, card.id, index, cards.length, onComplete]\n  )\n\n  // ── Finished ──────────────────────────────────────────────────────────────\n  if (finished) {\n    const counts: Record<FlashcardDifficulty, number> = { again: 0, hard: 0, good: 0, easy: 0 }\n    for (const r of ratings) counts[r.difficulty]++\n    return (\n      <div className={cn(\"w-full max-w-2xl mx-auto space-y-4\", className)}>\n        <div className=\"text-center space-y-2\">\n          <h2 className=\"text-2xl font-bold\">Session Complete!</h2>\n          <p className=\"text-muted-foreground\">You reviewed all {cards.length} cards.</p>\n        </div>\n        <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n          {(Object.keys(DIFFICULTY_CONFIG) as FlashcardDifficulty[]).map((d) => (\n            <Card key={d}>\n              <CardContent className=\"pt-4 text-center\">\n                <p className=\"text-3xl font-bold\">{counts[d]}</p>\n                <p className=\"text-sm text-muted-foreground capitalize\">{d}</p>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n        <div className=\"flex justify-center\">\n          <Button\n            variant=\"outline\"\n            onClick={() => { setIndex(0); setFlipped(false); setRatings([]); setFinished(false) }}\n          >\n            <RotateCcw className=\"mr-2 size-4\" /> Restart\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn(\"w-full max-w-2xl mx-auto space-y-4\", className)}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"font-semibold text-lg\">{title}</h2>\n          {description && <p className=\"text-sm text-muted-foreground\">{description}</p>}\n        </div>\n        <Badge variant=\"outline\">{index + 1} / {cards.length}</Badge>\n      </div>\n\n      <Progress value={progress} className=\"h-1.5\" />\n\n      {/* 3-D flip card */}\n      <div\n        className=\"relative h-64 cursor-pointer select-none\"\n        style={{ perspective: \"1200px\" }}\n        onClick={handleFlip}\n        role=\"button\"\n        aria-label={flipped ? \"Card back — click to flip\" : \"Card front — click to flip\"}\n        tabIndex={0}\n        onKeyDown={(e) => e.key === \"Enter\" && handleFlip()}\n      >\n        <div\n          className=\"relative w-full h-full transition-transform duration-500\"\n          style={{ transformStyle: \"preserve-3d\", transform: flipped ? \"rotateY(180deg)\" : \"rotateY(0deg)\" }}\n        >\n          {/* Front */}\n          <div\n            className=\"absolute inset-0 rounded-xl border bg-card shadow-md flex flex-col items-center justify-center p-8 text-center\"\n            style={{ backfaceVisibility: \"hidden\" }}\n          >\n            {card.tag && <Badge variant=\"secondary\" className=\"mb-3 text-xs\">{card.tag}</Badge>}\n            {card.frontImage && <img src={card.frontImage} alt=\"card front\" className=\"mb-3 max-h-24 object-contain rounded\" />}\n            <p className=\"text-xl font-medium leading-snug\">{card.front}</p>\n            <p className=\"mt-4 text-xs text-muted-foreground\">Click to reveal</p>\n          </div>\n          {/* Back */}\n          <div\n            className=\"absolute inset-0 rounded-xl border bg-primary/5 shadow-md flex flex-col items-center justify-center p-8 text-center\"\n            style={{ backfaceVisibility: \"hidden\", transform: \"rotateY(180deg)\" }}\n          >\n            {card.backImage && <img src={card.backImage} alt=\"card back\" className=\"mb-3 max-h-24 object-contain rounded\" />}\n            <p className=\"text-xl leading-snug\">{card.back}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Controls */}\n      <div className=\"flex items-center justify-between gap-2\">\n        <Button\n          variant=\"ghost\" size=\"icon\"\n          onClick={() => { if (index > 0) { setIndex((i) => i - 1); setFlipped(false) } }}\n          disabled={index === 0}\n        >\n          <ChevronLeft className=\"size-4\" />\n        </Button>\n\n        {showRatings && flipped ? (\n          <div className=\"flex gap-2 flex-wrap justify-center\">\n            {(Object.keys(DIFFICULTY_CONFIG) as FlashcardDifficulty[]).map((d) => (\n              <Button key={d} variant={DIFFICULTY_CONFIG[d].variant} size=\"sm\" onClick={() => handleRate(d)}>\n                {DIFFICULTY_CONFIG[d].label}\n              </Button>\n            ))}\n          </div>\n        ) : (\n          <Button onClick={handleFlip} variant=\"outline\" className=\"flex-1 max-w-xs\">\n            {flipped\n              ? <><RotateCcw className=\"mr-2 size-4\" />Flip Back</>\n              : <><ThumbsUp className=\"mr-2 size-4\" />Reveal Answer</>}\n          </Button>\n        )}\n\n        <Button\n          variant=\"ghost\" size=\"icon\"\n          onClick={() => { if (index + 1 < cards.length) { setIndex((i) => i + 1); setFlipped(false) } }}\n          disabled={index + 1 >= cards.length}\n        >\n          <ChevronRight className=\"size-4\" />\n        </Button>\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:component"
    }
  ]
}